{"ast":null,"code":"import _slicedToArray from\"C:/Users/ADMIN/Desktop/New folder/vectorshift/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ui.js\n// Displays the drag-and-drop UI\n// --------------------------------------------------\nimport{useState,useRef,useCallback}from'react';import ReactFlow,{Controls,Background,MiniMap}from'reactflow';import{useStore}from'./store';import{shallow}from'zustand/shallow';import LLMNode from'./nodes/llmNode';import{InputNode}from'./nodes/inputNode';import{OutputNode}from'./nodes/outputNode';import{TextNode}from'./nodes/textNode';import'reactflow/dist/style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var gridSize=20;var proOptions={hideAttribution:true};var nodeTypes={customInput:InputNode,llm:LLMNode,customOutput:OutputNode,text:TextNode};var selector=function selector(state){return{nodes:state.nodes,edges:state.edges,getNodeID:state.getNodeID,addNode:state.addNode,onNodesChange:state.onNodesChange,onEdgesChange:state.onEdgesChange,onConnect:state.onConnect};};export var PipelineUI=function PipelineUI(){var reactFlowWrapper=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),reactFlowInstance=_useState2[0],setReactFlowInstance=_useState2[1];var _useStore=useStore(selector,shallow),nodes=_useStore.nodes,edges=_useStore.edges,getNodeID=_useStore.getNodeID,addNode=_useStore.addNode,onNodesChange=_useStore.onNodesChange,onEdgesChange=_useStore.onEdgesChange,onConnect=_useStore.onConnect;var getInitNodeData=function getInitNodeData(nodeID,type){var nodeData={id:nodeID,nodeType:\"\".concat(type)};return nodeData;};var onDrop=useCallback(function(event){var _event$dataTransfer;event.preventDefault();var reactFlowBounds=reactFlowWrapper.current.getBoundingClientRect();if(event!==null&&event!==void 0&&(_event$dataTransfer=event.dataTransfer)!==null&&_event$dataTransfer!==void 0&&_event$dataTransfer.getData('application/reactflow')){var appData=JSON.parse(event.dataTransfer.getData('application/reactflow'));var type=appData===null||appData===void 0?void 0:appData.nodeType;// check if the dropped element is valid\nif(typeof type==='undefined'||!type){return;}var position=reactFlowInstance.project({x:event.clientX-reactFlowBounds.left,y:event.clientY-reactFlowBounds.top});var nodeID=getNodeID(type);var newNode={id:nodeID,type:type,position:position,data:getInitNodeData(nodeID,type)};addNode(newNode);}},[reactFlowInstance]);var onDragOver=useCallback(function(event){event.preventDefault();event.dataTransfer.dropEffect='move';},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{ref:reactFlowWrapper,style:{width:'100wv',height:'70vh'},children:/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,onConnect:onConnect,onDrop:onDrop,onDragOver:onDragOver,onInit:setReactFlowInstance,nodeTypes:nodeTypes,proOptions:proOptions,snapGrid:[gridSize,gridSize],connectionLineType:\"smoothstep\",children:[/*#__PURE__*/_jsx(Background,{color:\"#aaa\",gap:gridSize}),/*#__PURE__*/_jsx(Controls,{}),/*#__PURE__*/_jsx(MiniMap,{})]})})});};","map":{"version":3,"names":["useState","useRef","useCallback","ReactFlow","Controls","Background","MiniMap","useStore","shallow","LLMNode","InputNode","OutputNode","TextNode","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","gridSize","proOptions","hideAttribution","nodeTypes","customInput","llm","customOutput","text","selector","state","nodes","edges","getNodeID","addNode","onNodesChange","onEdgesChange","onConnect","PipelineUI","reactFlowWrapper","_useState","_useState2","_slicedToArray","reactFlowInstance","setReactFlowInstance","_useStore","getInitNodeData","nodeID","type","nodeData","id","nodeType","concat","onDrop","event","_event$dataTransfer","preventDefault","reactFlowBounds","current","getBoundingClientRect","dataTransfer","getData","appData","JSON","parse","position","project","x","clientX","left","y","clientY","top","newNode","data","onDragOver","dropEffect","children","ref","style","width","height","onInit","snapGrid","connectionLineType","color","gap"],"sources":["C:/Users/ADMIN/Desktop/New folder/vectorshift/frontend/src/ui.js"],"sourcesContent":["// ui.js\n// Displays the drag-and-drop UI\n// --------------------------------------------------\n\nimport { useState, useRef, useCallback } from 'react';\nimport ReactFlow, { Controls, Background, MiniMap } from 'reactflow';\nimport { useStore } from './store';\nimport { shallow } from 'zustand/shallow';\nimport LLMNode from './nodes/llmNode';\nimport { InputNode } from './nodes/inputNode';\nimport { OutputNode } from './nodes/outputNode';\nimport { TextNode } from './nodes/textNode';\n\n\n\nimport 'reactflow/dist/style.css';\n\nconst gridSize = 20;\nconst proOptions = { hideAttribution: true };\nconst nodeTypes = {\n  customInput: InputNode,\n  llm: LLMNode,\n  customOutput: OutputNode,\n  text: TextNode,\n};\n\nconst selector = (state) => ({\n  nodes: state.nodes,\n  edges: state.edges,\n  getNodeID: state.getNodeID,\n  addNode: state.addNode,\n  onNodesChange: state.onNodesChange,\n  onEdgesChange: state.onEdgesChange,\n  onConnect: state.onConnect,\n});\n\nexport const PipelineUI = () => {\n    const reactFlowWrapper = useRef(null);\n    const [reactFlowInstance, setReactFlowInstance] = useState(null);\n    const {\n      nodes,\n      edges,\n      getNodeID,\n      addNode,\n      onNodesChange,\n      onEdgesChange,\n      onConnect\n    } = useStore(selector, shallow);\n\n    const getInitNodeData = (nodeID, type) => {\n      let nodeData = { id: nodeID, nodeType: `${type}` };\n      return nodeData;\n    }\n\n    const onDrop = useCallback(\n        (event) => {\n          event.preventDefault();\n    \n          const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n          if (event?.dataTransfer?.getData('application/reactflow')) {\n            const appData = JSON.parse(event.dataTransfer.getData('application/reactflow'));\n            const type = appData?.nodeType;\n      \n            // check if the dropped element is valid\n            if (typeof type === 'undefined' || !type) {\n              return;\n            }\n      \n            const position = reactFlowInstance.project({\n              x: event.clientX - reactFlowBounds.left,\n              y: event.clientY - reactFlowBounds.top,\n            });\n\n            const nodeID = getNodeID(type);\n            const newNode = {\n              id: nodeID,\n              type,\n              position,\n              data: getInitNodeData(nodeID, type),\n            };\n      \n            addNode(newNode);\n          }\n        },\n        [reactFlowInstance]\n    );\n\n    const onDragOver = useCallback((event) => {\n        event.preventDefault();\n        event.dataTransfer.dropEffect = 'move';\n    }, []);\n\n    return (\n        <>\n        <div ref={reactFlowWrapper} style={{width: '100wv', height: '70vh'}}>\n            <ReactFlow\n                nodes={nodes}\n                edges={edges}\n                onNodesChange={onNodesChange}\n                onEdgesChange={onEdgesChange}\n                onConnect={onConnect}\n                onDrop={onDrop}\n                onDragOver={onDragOver}\n                onInit={setReactFlowInstance}\n                nodeTypes={nodeTypes}\n                proOptions={proOptions}\n                snapGrid={[gridSize, gridSize]}\n                connectionLineType='smoothstep'\n            >\n                <Background color=\"#aaa\" gap={gridSize} />\n                <Controls />\n                <MiniMap />\n            </ReactFlow>\n        </div>\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}