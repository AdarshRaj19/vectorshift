{"ast":null,"code":"import _defineProperty from\"C:/Users/ADMIN/Desktop/New folder/vectorshift/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/ADMIN/Desktop/New folder/vectorshift/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/ADMIN/Desktop/New folder/vectorshift/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";// store.js\nimport{create}from\"zustand\";import{addEdge,applyNodeChanges,applyEdgeChanges,MarkerType}from'reactflow';var saveToHistory=function saveToHistory(newState,currentState){var history=_toConsumableArray(currentState.history.slice(0,currentState.historyIndex+1));history.push({nodes:currentState.nodes,edges:currentState.edges,nodeIDs:currentState.nodeIDs});return _objectSpread(_objectSpread({},newState),{},{history:history,historyIndex:history.length-1});};export var useStore=create(function(set,get){return{nodes:[],edges:[],nodeIDs:{},history:[],historyIndex:-1,getNodeID:function getNodeID(type){var newIDs=_objectSpread({},get().nodeIDs);if(newIDs[type]===undefined){newIDs[type]=0;}newIDs[type]+=1;set({nodeIDs:newIDs});return\"\".concat(type,\"-\").concat(newIDs[type]);},addNode:function addNode(node){set(function(state){var newState={nodes:[].concat(_toConsumableArray(state.nodes),[node]),edges:state.edges,nodeIDs:state.nodeIDs};return saveToHistory(newState,state);});},onNodesChange:function onNodesChange(changes){set(function(state){var newNodes=applyNodeChanges(changes,state.nodes);var newState=_objectSpread(_objectSpread({},state),{},{nodes:newNodes});return saveToHistory(newState,state);});},onEdgesChange:function onEdgesChange(changes){set(function(state){var newEdges=applyEdgeChanges(changes,state.edges);var newState=_objectSpread(_objectSpread({},state),{},{edges:newEdges});return saveToHistory(newState,state);});},onConnect:function onConnect(connection){set(function(state){var newEdges=addEdge(_objectSpread(_objectSpread({},connection),{},{type:'smoothstep',animated:true,markerEnd:{type:MarkerType.Arrow,height:'20px',width:'20px'}}),state.edges);var newState=_objectSpread(_objectSpread({},state),{},{edges:newEdges});return saveToHistory(newState,state);});},updateNodeField:function updateNodeField(nodeId,fieldName,fieldValue){set({nodes:get().nodes.map(function(node){if(node.id===nodeId){node.data=_objectSpread(_objectSpread({},node.data),{},_defineProperty({},fieldName,fieldValue));}return node;})});},savePipeline:function savePipeline(){var _get=get(),nodes=_get.nodes,edges=_get.edges;localStorage.setItem('vectorshift-pipeline',JSON.stringify({nodes:nodes,edges:edges}));},loadPipeline:function loadPipeline(){var saved=localStorage.getItem('vectorshift-pipeline');if(saved){var _JSON$parse=JSON.parse(saved),nodes=_JSON$parse.nodes,edges=_JSON$parse.edges;set({nodes:nodes,edges:edges});}},clearPipeline:function clearPipeline(){set({nodes:[],edges:[],nodeIDs:{},history:[],historyIndex:-1});},undo:function undo(){set(function(state){if(state.historyIndex>0){var prevState=state.history[state.historyIndex-1];return _objectSpread(_objectSpread({},prevState),{},{history:state.history,historyIndex:state.historyIndex-1});}return state;});},redo:function redo(){set(function(state){if(state.historyIndex<state.history.length-1){var nextState=state.history[state.historyIndex+1];return _objectSpread(_objectSpread({},nextState),{},{history:state.history,historyIndex:state.historyIndex+1});}return state;});}};});","map":{"version":3,"names":["create","addEdge","applyNodeChanges","applyEdgeChanges","MarkerType","saveToHistory","newState","currentState","history","_toConsumableArray","slice","historyIndex","push","nodes","edges","nodeIDs","_objectSpread","length","useStore","set","get","getNodeID","type","newIDs","undefined","concat","addNode","node","state","onNodesChange","changes","newNodes","onEdgesChange","newEdges","onConnect","connection","animated","markerEnd","Arrow","height","width","updateNodeField","nodeId","fieldName","fieldValue","map","id","data","_defineProperty","savePipeline","_get","localStorage","setItem","JSON","stringify","loadPipeline","saved","getItem","_JSON$parse","parse","clearPipeline","undo","prevState","redo","nextState"],"sources":["C:/Users/ADMIN/Desktop/New folder/vectorshift/frontend/src/store.js"],"sourcesContent":["// store.js\n\nimport { create } from \"zustand\";\nimport {\n    addEdge,\n    applyNodeChanges,\n    applyEdgeChanges,\n    MarkerType,\n  } from 'reactflow';\n\nconst saveToHistory = (newState, currentState) => {\n    const history = [...currentState.history.slice(0, currentState.historyIndex + 1)];\n    history.push({ nodes: currentState.nodes, edges: currentState.edges, nodeIDs: currentState.nodeIDs });\n    return {\n        ...newState,\n        history,\n        historyIndex: history.length - 1\n    };\n};\n\nexport const useStore = create((set, get) => ({\n    nodes: [],\n    edges: [],\n    nodeIDs: {},\n    history: [],\n    historyIndex: -1,\n    getNodeID: (type) => {\n        const newIDs = {...get().nodeIDs};\n        if (newIDs[type] === undefined) {\n            newIDs[type] = 0;\n        }\n        newIDs[type] += 1;\n        set({nodeIDs: newIDs});\n        return `${type}-${newIDs[type]}`;\n    },\n    addNode: (node) => {\n        set((state) => {\n            const newState = {\n                nodes: [...state.nodes, node],\n                edges: state.edges,\n                nodeIDs: state.nodeIDs\n            };\n            return saveToHistory(newState, state);\n        });\n    },\n    onNodesChange: (changes) => {\n        set((state) => {\n            const newNodes = applyNodeChanges(changes, state.nodes);\n            const newState = { ...state, nodes: newNodes };\n            return saveToHistory(newState, state);\n        });\n    },\n    onEdgesChange: (changes) => {\n        set((state) => {\n            const newEdges = applyEdgeChanges(changes, state.edges);\n            const newState = { ...state, edges: newEdges };\n            return saveToHistory(newState, state);\n        });\n    },\n    onConnect: (connection) => {\n        set((state) => {\n            const newEdges = addEdge({...connection, type: 'smoothstep', animated: true, markerEnd: {type: MarkerType.Arrow, height: '20px', width: '20px'}}, state.edges);\n            const newState = { ...state, edges: newEdges };\n            return saveToHistory(newState, state);\n        });\n    },\n    updateNodeField: (nodeId, fieldName, fieldValue) => {\n      set({\n        nodes: get().nodes.map((node) => {\n          if (node.id === nodeId) {\n            node.data = { ...node.data, [fieldName]: fieldValue };\n          }\n  \n          return node;\n        }),\n      });\n    },\n    savePipeline: () => {\n      const { nodes, edges } = get();\n      localStorage.setItem('vectorshift-pipeline', JSON.stringify({ nodes, edges }));\n    },\n    loadPipeline: () => {\n      const saved = localStorage.getItem('vectorshift-pipeline');\n      if (saved) {\n        const { nodes, edges } = JSON.parse(saved);\n        set({ nodes, edges });\n      }\n    },\n    clearPipeline: () => {\n      set({ nodes: [], edges: [], nodeIDs: {}, history: [], historyIndex: -1 });\n    },\n    undo: () => {\n        set((state) => {\n            if (state.historyIndex > 0) {\n                const prevState = state.history[state.historyIndex - 1];\n                return {\n                    ...prevState,\n                    history: state.history,\n                    historyIndex: state.historyIndex - 1\n                };\n            }\n            return state;\n        });\n    },\n    redo: () => {\n        set((state) => {\n            if (state.historyIndex < state.history.length - 1) {\n                const nextState = state.history[state.historyIndex + 1];\n                return {\n                    ...nextState,\n                    history: state.history,\n                    historyIndex: state.historyIndex + 1\n                };\n            }\n            return state;\n        });\n    },\n  }));\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}